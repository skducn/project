function transDecode(value,pu,pi) {
    var arr = value.split("###");
    var key = arr[0];
    var val = arr[1];
    var model = new JSEncrypt();
    model.setPrivateKey(pi);
    var aesKey = model.decrypt(key);
    var deKey = CryptoJS.enc.Utf8.parse(aesKey);
    var decrypt = CryptoJS.AES.decrypt(val, deKey, {mode:CryptoJS.mode.ECB,padding: CryptoJS.pad.Pkcs7});
    var deVal= CryptoJS.enc.Utf8.stringify(decrypt).toString();
    return deVal;
}

function transEncode(value,pu,pi) {
    if (value == undefined || value == "") return "";
    var model = new JSEncrypt();
    model.setPublicKey(pu);
    var aesKey = randomChar(16);
    var randKey = model.encrypt(aesKey);
    var key = CryptoJS.enc.Utf8.parse(aesKey);
    var srcs = CryptoJS.enc.Utf8.parse(value);
    var encrypted = CryptoJS.AES.encrypt(srcs, key, {mode: CryptoJS.mode.ECB, padding: CryptoJS.pad.Pkcs7});
    return randKey.toString() + "###" + encrypted.toString();
}

function randomChar(l) {
    var x = "0123456789qwertyuioplkjhgfdsazxcvbnm";
    var tmp = "";
    for (var i = 0; i < l; i++) {
        tmp += x.charAt(Math.ceil(Math.random() * 100000000) % x.length);
    }
    return tmp;
}